<!DOCTYPE html>
<html lang="en" class="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- icon -->
        <link rel="icon" type="image/x-icon" href="../site-assets/assets/logo/CitoHubIcon.png">
        <title id="site-title">Under development - SpeingCodeEditor</title>
        <!-- .webmanifest-->
        <link rel="manifest" href="../site-assets/manifest/app.webmanifest" />
        <!-- CSS -->
        <link rel="stylesheet" href="../site-assets/css/header.css" />
        <link rel="stylesheet" href="../site-assets/css/styles.css" />
        <link rel="stylesheet" href="../site-assets/css/tag.css" />
        <link rel="stylesheet" href="../site-assets/css/links.css" />
        <link rel="stylesheet" href="../site-assets/css/changelog.css" />
        <link rel="stylesheet" href="../site-assets/css/versions.css" />
        <!-- JS -->
        <script src="../site-assets/js/languageChange.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <!-- code font for google-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet">
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/9b65a345ec.js" crossorigin="anonymous"></script>
        <!-- 国旗アイコンcss-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.3/css/flag-icons.min.css" rel="stylesheet">
    </head>
    <body>
        <header id="headerBackground" class="header--TuwRF">
            <div>
                <div class="header-leftArea">
                    <div id="logoFxnxa" class="logo--Fxnxa header-site-logo-area">
                        <a href="../" aria-label="citohub-icon">
                            <img id="citohub-icon" style="width: 50px; height: 50px;" src="../site-assets/assets/logo/CitoHubIcon.png" alt="logo">
                        </a>
                    </div>
                    <div class="site-title-text"><strong style="font-weight: bold; font-size: 18px;" glot-model="Under+development">Under development</strong></div>                    
                </div>
                <div class="mobileSearch--WI2Tv"></div>
                <div class="LeftCen">
                    <a href="../" aria-label="Discussions"><div class="LeftCenItem animeSreddtUpfadeIn"><i class="fa-solid fa-bell" style="font-size: 20px;"></i></div></a>
                    <div class="LeftCenItem animeSreddtUpfadeIn"><i id="languageChange" class="fa-solid fa-earth-asia" style="font-size: 20px;" onclick="languageChangeBtn()"></i></div>
                </div>
                <div class="languageListBox">
                    <div id="languageListArea" class="nav nav-masthead justify-content-center languageList">
                        <div class="languageListAreaBoxs">
                            <li class="nav-link link" href="" id="ar" glot-model="sa" onclick="languageListAreaNone()">
                                <span class="flag-icon flag-icon-sa"></span>
                                <a href="/">اللغة العربية</a>
                            </li>
                            <li  class="nav-link link" href="" id="zh" glot-model="cn" onclick="languageListAreaNone()">
                                <span class="flag-icon flag-icon-cn"></span>
                                <a href="/">中文</a>
                            </li>
                            <li  class="nav-link link" href="" id="en" glot-model="us" onclick="languageListAreaNone()">
                                <span class="flag-icon flag-icon-us"></span>
                                <a href="/">English</a>
                            </li>
                            <li  class="nav-link link" href="" id="id" glot-model="id" onclick="languageListAreaNone()">
                                <span class="flag-icon flag-icon-id"></span>
                                <a href="/">Bahasa Indonesia</a>
                            </li>
                            <li class="nav-link link" href="" id="ja" glot-model="jp" onclick="languageListAreaNone()">
                                <span class="flag-icon flag-icon-jp"></span>
                                <a href="/">日本語</a>
                            </li>
                            <li  class="nav-link link" href="" id="ms" glot-model="my" onclick="languageListAreaNone()">
                                <span class="flag-icon flag-icon-my"></span>
                                <a href="/">Bahasa Melayu</a>
                            </li>
                            <li  class="nav-link link" href="" id="es" glot-model="es" onclick="languageListAreaNone()">
                                <span class="flag-icon flag-icon-es"></span>
                                <a href="/">español</a>
                            </li>
                        </div>
                    </div>
                </div>
                <div class="LeftCen">
                    <a href="https://github.com/Fun117" target="_blank" class="LeftCenItem animeSreddtUpfadeIn"><i class="fa-brands fa-github" style="font-size: 20px;"></i></a>
                </div>
            </div>
        </header>
        <main>
            <div class="legacy-container changelog">
                <div class="navigation">
                    <a href="../changelog/" class="btn btn-link">
                        <i class="fa-solid fa-chart-simple"></i>
                        <span glot-model="changelog">changelog</span>
                    </a>
                    <input id="searchBox" class="btn btn-input query-search" placeholder="Search" type="text">
                </div>
                <div class="card-column">
                    <span id="cardNull" class="note is-hidden">No results</span>
                    <div class="versionListBoxes animeSreddtUpfadeIn">
                        <div class="card box">
                            <div class="card-content">
                                <div class="badges-list">
                                    <div class="badge" style="--tint: 25;" glot-model="page">
                                        page
                                    </div>
                                    <div class="badge" style="--tint: 124;" glot-model="development">
                                        development
                                    </div>
                                </div>
                                <div class="changelog-content">
                                    <p glot-model="Site+system">Site system</p>
                                </div>
                            </div>
                        </div>
                        <div class="card box">
                            <div class="card-content">
                                <div class="badges-list">
                                    <div class="badge" style="--tint: 50;" glot-model="page">
                                        page
                                    </div>
                                    <div class="badge" style="--tint: 124;" glot-model="development">
                                        development
                                    </div>
                                </div>
                                <div class="changelog-content">
                                    <p glot-model="Site+system">Site system</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </body>
    <!-- ページロードアニメーション-->
    <div id="js-loader" class="loader"></div>
    <script>
        const loader = document.getElementById('js-loader');
        window.addEventListener('load', () => {
        const ms = 400;
        loader.style.transition = 'opacity ' + ms + 'ms';

        const loaderOpacity = function(){
            loader.style.opacity = 0;
        }
        const loaderDisplay = function(){
            loader.style.display = "none";
        }
            setTimeout(loaderOpacity, 1);
            setTimeout(loaderDisplay, ms);
        })
    </script>

    <!-- ページ内検索機能 -->
    <style> /*フィルター要素隠す*/
        .is-hidden { display: none; }
    </style>
    <script>
        //  検索フィルター機能
        let cards = document.querySelectorAll('.box')
        let allCards = document.querySelectorAll('.versionListBoxes')
        window.setInterval(liveSearch, 500);

        function liveSearch() {
            let search_query = document.getElementById("searchBox").value;
            let allCardsConst = 0;
            //Use innerText if all contents are visible
            //Use textContent for including hidden elements
            for (var i = 0; i < cards.length; i++) {
                if(cards[i].textContent.toLowerCase()
                    .includes(search_query.toLowerCase())) {
                    cards[i].classList.remove("is-hidden");
                    allCardsConst = allCardsConst + 1;
                } else {
                    cards[i].classList.add("is-hidden");
                }
            }
            if(allCardsConst === 0){
                document.querySelector('#cardNull').classList.remove('is-hidden');
            }else{
                document.querySelector('#cardNull').classList.add('is-hidden');
            }
        }

        //A little delay
        let typingTimer;
        let typeInterval = 500;
        let searchInput = document.getElementById('searchBox');

        searchInput.addEventListener('keyup', () => {
            clearTimeout(typingTimer);
            typingTimer = setTimeout(liveSearch, typeInterval);
        });
    </script>

    <!-- Glottologist読み込み -->
    <script  src="https://unpkg.com/glottologist"></script>
    <script>
        const glot = new Glottologist();

        // クッキーから言語情報を取得
        if(navigator.cookieEnabled){ // クッキーがクッキーが使えるか確認
            // クッキーを読み出す
            const obj = convertCookieToObject(document.cookie);
            if(obj !== ""){ //クッキーにデータがあるか
                let jsonLang = obj.lang;
                if(jsonLang = ""){
                    glot.import("../site-assets/json/glot-data.json").then(() => {
                        glot.render();
                    });
                    let rootElement = document.documentElement;
                    lang =(rootElement.lang);
                    document.cookie = 'lang=' + lang+'; path=/';
                }else{
                    glot.render(jsonLang);
                }
            }else{
                glot.import("../site-assets/json/glot-data.json").then(() => {
                    glot.render();
                });
                let rootElement = document.documentElement;
                lang =(rootElement.lang);
                document.cookie = 'lang=' + lang+'; path=/';
            }
        }

        // Glottologistの処理

        //JSONファイルの読み込み
        document.addEventListener('DOMContentLoaded', function(){
            // クッキーを読み出す
            const obj = convertCookieToObject(document.cookie);
            let jsonLang = obj.lang;
            glot.import("../site-assets/json/glot-data.json").then(() => {
                glot.render(jsonLang);
                setLangTextForm()
            });
            setLangTextForm()
        });

        /**
        言語切り替え用のイベント処理
        **/

        const ar = document.getElementById('ar');
        const zh = document.getElementById('zh');
        const en = document.getElementById('en');
        const id = document.getElementById('id');
        const ja = document.getElementById('ja');
        const ms = document.getElementById('ms');
        const es = document.getElementById('es');

        ar.addEventListener('click', e => {
            e.preventDefault()
            glot.render('ar');
            langCiikiesSeve()
        });
        zh.addEventListener('click', e => {
            e.preventDefault()
            glot.render('zh');
            langCiikiesSeve()
        });
        en.addEventListener('click', e => {
            e.preventDefault()
            glot.render('en');
            langCiikiesSeve()
        });
        id.addEventListener('click', e => {
            e.preventDefault()
            glot.render('id');
            langCiikiesSeve()
        });
        ja.addEventListener('click', e => {
            e.preventDefault();
            glot.render('ja');
            langCiikiesSeve()
        });
        ms.addEventListener('click', e => {
            e.preventDefault()
            glot.render('ms');
            langCiikiesSeve()
        });
        es.addEventListener('click', e => {
            e.preventDefault()
            glot.render('es');
            langCiikiesSeve()
        });

        // ID翻訳
        function setLangTextForm(){
            let rootElement = document.documentElement;
            lang =(rootElement.lang);
            if(lang === "ar"){
                document.getElementById("site-title").innerHTML = "Under development - SpeingCodeEditor"
            }else{
                if(lang === "zh"){
                    document.getElementById("site-title").innerHTML = "Under development - SpeingCodeEditor"
                }else{
                    if(lang === "en"){
                        document.getElementById("site-title").innerHTML = "Under development - SpeingCodeEditor"
                    }else{
                        if(lang === "id"){
                            document.getElementById("site-title").innerHTML = "Under development - SpeingCodeEditor"
                        }else{
                            if(lang === "ja"){
                                document.getElementById("site-title").innerHTML = "開発中の - SpeingCodeEditor"
                            }else{
                                if(lang === "ms"){
                                    document.getElementById("site-title").innerHTML = "Under development - SpeingCodeEditor"
                                }else{
                                    if(lang === "es"){
                                        document.getElementById("site-title").innerHTML = "Under development - SpeingCodeEditor"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        // 言語変更検知
        function langCiikiesSeve(){
            if(navigator.cookieEnabled){ // クッキーがクッキーが使えるか確認
                let rootElement = document.documentElement;
                lang =(rootElement.lang);
                document.cookie = 'lang=' + lang+'; path=/';
                // クッキーを読み出す
                const obj = convertCookieToObject(document.cookie);
            }
            setLangTextForm()
        }
        //document.cookie = 'lang=; max-age=0'; // クッキーの削除


        // クッキーの解析
        function convertCookieToObject(cookies) {
            const cookieItem = cookies.split(';');
            const obj = {};
            cookieItem.forEach((item) => {
                // 「=」で分解
                const element = item.split('=');
                // キーを取得
                const key = element[0].trim();
                // バリューを取得
                const value = decodeURIComponent(element[1]);
                // 保存
                obj[key] = value;
            });
            return obj;
        }
    </script>
</html>